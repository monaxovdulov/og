### Как это работает

1) `/start` шлёт главное меню.  
2) Кнопки генерируются из `keyboards.py` (единые ns-константы и `cb()` с инвариантами).  
3) Любой тап → `callbacks.on_callback`: парсится `ns:action:args`, подбирается роутер, вызывается конкретный хендлер из `handlers.py`.  
4) Хендлеры обновляют текст/клавиатуру через безопасные `_safe_edit_*`, поддерживая inline/обычные сообщения.  
5) Настройки и сессии — пока in-memory; интерфейсы уже отделены, так что перенос в Redis/DB — точечный.

Если хочешь, могу сразу накидать минимальные pytest-тесты для `cb()`, `parse_cb()` и `t_router()` — скажи, добавлю.
